// script.js
document.addEventListener('DOMContentLoaded', () => {

  // ðŸŒ¸ Fade-in on scroll
  const faders = document.querySelectorAll('.fade-in');
  const observer = new IntersectionObserver((entries, obs) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
        obs.unobserve(entry.target);
      }
    });
  }, { threshold: 0.2 });

  faders.forEach(el => observer.observe(el));

  // ðŸ“… Dynamic footer year
  const yearEl = document.getElementById('year');
  if (yearEl) {
    yearEl.textContent = new Date().getFullYear();
  }

  // ðŸ’Œ Contact form behavior (Formspree + mailto fallback)
  const form = document.getElementById('contactForm');
  const mailtoBtn = document.getElementById('mailtoFallback');

  if (form) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const action = form.getAttribute('action');
      const formData = new FormData(form);

      try {
        const res = await fetch(action, {
          method: 'POST',
          body: formData,
          headers: { 'Accept': 'application/json' }
        });

        if (res.ok) {
          alert('Thank you! Your message has been sent successfully ðŸ’Œ');
          form.reset();
        } else {
          throw new Error('Formspree submission failed.');
        }
      } catch (err) {
        // fallback to mailto
        const name = formData.get('name');
        const email = formData.get('_replyto');
        const message = formData.get('message');
        const subject = encodeURIComponent('Contact from Shriya Portfolio');
        const body = encodeURIComponent(`Name: ${name}\nEmail: ${email}\n\n${message}`);
        window.location.href = mailto:shriyatrivedi0@gmail.com?subject=${subject}&body=${body};
      }
    });
  }

  if (mailtoBtn) {
    mailtoBtn.addEventListener('click', () => {
      const subject = encodeURIComponent('Contact from Shriya Portfolio');
      const body = encodeURIComponent('Hello Shriya,\n\nI wanted to reach out regarding...');
      window.location.href = mailto:shriyatrivedi0@gmail.com?subject=${subject}&body=${body};
    });
  }

});